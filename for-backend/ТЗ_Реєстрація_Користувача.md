
# üîß –¢–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—É—á–µ–Ω—å / –≤—á–∏—Ç–µ–ª—å)

## 1. –ú–µ—Ç–∞

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —î–¥–∏–Ω—É —Ñ–æ—Ä–º—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º –ø–æ—à—Ç–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —Ç–∞ –≤—á–∏—Ç–µ–ª—ñ–≤.  
–£ –≤—á–∏—Ç–µ–ª—ñ–≤ –ø–µ—Ä–µ–¥–±–∞—á–∏—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –µ—Ç–∞–ø—ñ–≤ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é —Ç–∞ —Ä—É—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é.

---

## 2. –†–æ–ª—ñ

- `student`: –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ—à—Ç–∏ –æ–¥—Ä–∞–∑—É –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É, –ø—Ä–æ—Ñ—ñ–ª—å –º–æ–∂–µ –∑–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏ –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ.
- `teacher`: –º–∞—î –ø—Ä–æ–π—Ç–∏ 3 –µ—Ç–∞–ø–∏ ‚Äî –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email, –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é, –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é.

---

## 3. –ü–æ–ª–µ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó: `verification_status`

–ó–∞–º—ñ—Å—Ç—å –∫—ñ–ª—å–∫–æ—Ö –±—É–ª–µ–≤–∏—Ö –ø–æ–ª—ñ–≤ (`is_verify`, `is_active` —Ç–æ—â–æ) –≤–≤–æ–¥–∏–º–æ **—î–¥–∏–Ω–∏–π —Å—Ç–∞—Ç—É—Å**:

```sql
CREATE TYPE verification_status AS ENUM (
  'unconfirmed',         -- –ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π, –ø–æ—à—Ç–∞ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞
  'email_confirmed',     -- –ü–æ—à—Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞, –ø—Ä–æ—Ñ—ñ–ª—å –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ
  'profile_completed',   -- –ó–∞–ø–æ–≤–Ω–µ–Ω–æ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤—ñ –ø–æ–ª—è
  'verified'             -- –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤—á–∏—Ç–µ–ª—ñ–≤)
);
```

–£ —Ç–∞–±–ª–∏—Ü—ñ `teacher`:
```sql
ALTER TABLE teacher ADD COLUMN verification_status verification_status NOT NULL DEFAULT 'unconfirmed';
```

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—Ç–∏ `verification_status` ‚Äî –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –∑ –ø–µ—Ä—à–∏—Ç–∏ 2-–º–∞ —Å—Ç–∞—Ç—É—Å–∞–º–∏.

---

## 4. User Flow Diagram

```
[–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞]
       |
       |--- –Ω–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è"  ‚îÄ‚îÄ‚ñ∫ [–§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó: role = student]
       |
       |--- –Ω–∞—Ç–∏—Å–∫–∞—î "–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å" ‚îÄ‚îÄ‚ñ∫ [–§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó: role = teacher]

üü¶ [–§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó]
       |
       ‚îú‚îÄ –≤–≤–æ–¥–∏—Ç—å Email, Password
       ‚îî‚îÄ –Ω–∞—Ç–∏—Å–∫–∞—î "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç"
                ‚Üì
üü® –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ Email –≤–∞–ª—ñ–¥–Ω–∏–π / –≤–∂–µ —ñ—Å–Ω—É—î?
       ‚îî‚îÄ –ù—ñ ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º 'unconfirmed', —Ä–æ–ª—å ‚Äî student/teacher
                ‚Üì
üü® –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email
                ‚Üì
üìß –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ª–∏—Å—Ç–∞ –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º
                ‚Üì
[–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞—à—É –ø–æ—à—Ç—É]

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–∫—Ä–∏–≤–∞—î email, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é
                ‚Üì
üü® –¢–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π?
       ‚îî‚îÄ –¢–∞–∫ ‚Üí
                ‚Üì
‚úÖ –û–Ω–æ–≤–∏—Ç–∏ verification_status:
   - student ‚Üí 'email_confirmed'
   - teacher ‚Üí 'email_confirmed'
                ‚Üì
üîÅ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç - —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

üü® –†–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?
       ‚îú‚îÄ Student ‚Üí
       |       üü© –í–∏–≤–æ–¥–∏–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—î—é –∑–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
       |
       ‚îî‚îÄ Teacher ‚Üí
               üîê –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: verification_status == 'email_confirmed'
                      ‚îî‚îÄ –¢–∞–∫ ‚Üí
                             üü© –ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º—É –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤:
                                first_name, last_name, phone, city, lesson_price, lesson_duration
                             ‚Üì
                             ‚úÖ –ü—ñ—Å–ª—è —Å–∞–±–º—ñ—Ç—É ‚Üí –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –Ω–∞ 'profile_completed'
                             üîÅ –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é
                             ‚Üì
                             üîê –î–æ–∫–∏ status != 'verified' ‚Äî –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤ —Ç–æ—â–æ
```

---

## 5. –¢–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏

- Django 4.x (—á–∏ –ø–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è –≤ –ø—Ä–æ–µ–∫—Ç—ñ).
- –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ—à—Ç–∏ ‚Äî —á–µ—Ä–µ–∑ email-—Ç–æ–∫–µ–Ω, SMTP.
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `AbstractBaseUser` –∞–±–æ `AbstractUser` –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ `Teacher` —ñ `Student`.
- `verification_status` ‚Äî –æ–∫—Ä–µ–º–µ –ø–æ–ª–µ –¥–ª—è –º–æ–¥–µ–ª–µ–π `Teacher`, —Ç–∞ `Student` —Ç–∏–ø ENUM.
- Middleware –∞–±–æ –∫–∞—Å—Ç–æ–º–Ω—ñ permissions –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –≤—á–∏—Ç–µ–ª—è –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏, –±–∞–∑—É—é—á–∏—Å—å –Ω–∞ —Å—Ç–∞—Ç—É—Å—ñ.

---

## 6. –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–æ—ó –∑–∞–¥–∞—á—ñ

- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ —î–¥–∏–Ω—É —Ñ–æ—Ä–º—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó.
- [ ] –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å `unconfirmed`.
- [ ] Email –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å –¥–æ `email_confirmed`.
- [ ] –í—á–∏—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª, –ø–æ–∫–∏ –Ω–µ –∑–∞–ø–æ–≤–Ω–∏—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è (`profile_completed`).
- [ ] –ü—ñ—Å–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ `verified`.
- [ ] –°—Ç—É–¥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email.

---

## 7. –ü—Ä–∏–º—ñ—Ç–∫–∏

- Email-–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è ‚Äî –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ –¥–ª—è –≤—Å—ñ—Ö.
- –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–æ—Ñ—ñ–ª—é –≤—á–∏—Ç–µ–ª—è ‚Äî —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É –Ω–∞–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É –∞–±–æ –æ–∫—Ä–µ–º—É –ø–∞–Ω–µ–ª—å.
- Front –º–∞—î –º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –ª–æ–≥—ñ–∫—É —Ä–µ–¥–∏—Ä–µ–∫—Ç—ñ–≤ —ñ –±–ª–æ–∫—É–≤–∞–Ω—å –¥–æ—Å—Ç—É–ø—É –∑–≥—ñ–¥–Ω–æ –∑ `verification_status`.
